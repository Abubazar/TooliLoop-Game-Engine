<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: sans-serif; }
    .block { 
      display: inline-block; 
      padding: 10px; 
      margin: 5px; 
      border-radius: 8px; 
      background: #ddd; 
      cursor: grab;
    }
    .if-block {
      background: #9ecfff;
      padding: 10px;
    }
    .dropzone {
      min-height: 30px;
      min-width: 80px;
      background: #f3f3f3;
      border: 2px dashed #ccc;
      border-radius: 6px;
      margin: 5px;
    }
    .dropzone.highlight {
      border-color: #007bff;
      background: #e0f0ff;
    }
  </style>
</head>
<body>
  <h3>Toolbox</h3>
  <div id="toolbox">
    <div class="block" draggable="true" data-type="action">Action</div>
    <div class="block" draggable="true" data-type="condition">Condition</div>
    <div class="block if-block" draggable="true" data-type="if">If Block</div>
  </div>

  <h3>Workspace</h3>
  <div id="workspace" class="dropzone"></div>

  <script>
    let draggedType = null;

    document.querySelectorAll('.block').forEach(block => {
      block.addEventListener('dragstart', e => {
        draggedType = e.target.dataset.type;
      });
    });

    function setupDropzone(zone) {
      zone.addEventListener('dragover', e => {
        e.preventDefault();
        e.stopPropagation();
        zone.classList.add('highlight');
      });
      zone.addEventListener('dragleave', e => {
        e.stopPropagation();
        zone.classList.remove('highlight');
      });
      zone.addEventListener('drop', e => {
        e.preventDefault();
        e.stopPropagation();
        zone.classList.remove('highlight');
        handleDrop(zone, draggedType);
      });
    }

    function handleDrop(zone, type) {
      let newBlock;

      if (type === 'if') {
        newBlock = document.createElement('div');
        newBlock.className = 'block if-block';
        newBlock.innerHTML = `
          if (<div class="dropzone condition-zone"></div>) {
            <div class="dropzone body-zone"></div>
          }
        `;
        // set up nested zones
        newBlock.querySelectorAll('.dropzone').forEach(setupDropzone);
      } 
      else {
        newBlock = document.createElement('div');
        newBlock.className = 'block';
        newBlock.textContent = type.charAt(0).toUpperCase() + type.slice(1);
      }

      newBlock.draggable = true;
      newBlock.dataset.type = type;
      zone.appendChild(newBlock);
    }

    // set up initial drop zone
    setupDropzone(document.getElementById('workspace'));
  </script>
</body>
</html>
